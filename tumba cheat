--[[
    Скрипт для отображения фейкового сообщения об ошибке.
    Сообщение исчезает через 6 секунд.
]]

-- Ждем, пока игра полностью загрузится, чтобы избежать ошибок
if not game:IsLoaded() then
    game.Loaded:Wait()
end

-- Получаем необходимые сервисы
local CoreGui = game:GetService("CoreGui")
local Debris = game:GetService("Debris")
local TweenService = game:GetService("TweenService")

-- Функция для создания и отображения UI ошибки
local function showPrankError()
    -- Создаем главный контейнер для GUI
    local ErrorGui = Instance.new("ScreenGui")
    ErrorGui.Name = "SystemFailureNotice"
    ErrorGui.Parent = CoreGui
    ErrorGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ErrorGui.DisplayOrder = 999 -- Устанавливаем высокий DisplayOrder, чтобы быть поверх всего

    -- Создаем фоновую рамку для сообщения
    local errorFrame = Instance.new("Frame")
    errorFrame.Size = UDim2.new(0, 550, 0, 120) -- Немного больше для дополнительного текста
    errorFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    errorFrame.Position = UDim2.new(0.5, 0, 0.5, 0) -- Центрируем на экране
    errorFrame.BackgroundColor3 = Color3.fromRGB(200, 0, 0) -- Ярко-красный цвет
    errorFrame.BackgroundTransparency = 0.1
    errorFrame.BorderSizePixel = 2
    errorFrame.BorderColor3 = Color3.fromRGB(150, 0, 0) -- Темно-красная рамка
    errorFrame.Parent = ErrorGui

    -- Добавляем градиент для глубины
    local errorGradient = Instance.new("UIGradient")
    errorGradient.Color = ColorSequence.new(Color3.fromRGB(150, 0, 0), Color3.fromRGB(50, 0, 0))
    errorGradient.Rotation = 90
    errorGradient.Parent = errorFrame

    -- Скругляем углы для современного вида
    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0, 8)
    UICorner.Parent = errorFrame

    -- Заголовок ошибки
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, 0, 0, 40)
    titleLabel.Position = UDim2.new(0, 0, 0, 0)
    titleLabel.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
    titleLabel.TextColor3 = Color3.new(1, 1, 1)
    titleLabel.Font = Enum.Font.Code
    titleLabel.TextSize = 24
    titleLabel.Text = "!! КРИТИЧЕСКАЯ ОШИБКА !! (緊急エラー)"
    titleLabel.Parent = errorFrame

    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 6)
    titleCorner.Parent = titleLabel

    -- Основной текст сообщения
    local errorLabel = Instance.new("TextLabel")
    errorLabel.Size = UDim2.new(1, -20, 0, 70)
    errorLabel.Position = UDim2.new(0.5, 0, 0, 45)
    errorLabel.AnchorPoint = Vector2.new(0.5, 0)
    errorLabel.BackgroundTransparency = 1
    errorLabel.TextColor3 = Color3.fromRGB(255, 200, 200) -- Светло-красный текст
    errorLabel.Font = Enum.Font.Code
    errorLabel.TextSize = 16
    errorLabel.TextWrapped = true
    errorLabel.Text = "В вашем экзекьюторе повреждены файлы.\nНе перезагружайте устройство! Инициализация протокола восстановления... (システム障害発生)\n(Error Code: 0xDEADBEEF)"
    errorLabel.Parent = errorFrame

    -- Анимация тряски
    task.spawn(function()
        local originalPosition = errorFrame.Position
        for i = 1, 30 do
            local offsetX = math.random(-5, 5)
            local offsetY = math.random(-5, 5)
            errorFrame.Position = originalPosition + UDim2.fromOffset(offsetX, offsetY)
            task.wait(0.03)
        end
        errorFrame.Position = originalPosition
    end)

    return ErrorGui
end

-- Функция для отображения UI "исправления"
local function showFixingUI()
    local FixingGui = Instance.new("ScreenGui")
    FixingGui.Name = "SystemRestoredNotice"
    FixingGui.Parent = CoreGui
    FixingGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    FixingGui.DisplayOrder = 998

    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(0, 500, 0, 150)
    mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    mainFrame.BackgroundColor3 = Color3.fromRGB(15, 20, 40)
    mainFrame.BorderSizePixel = 1
    mainFrame.BorderColor3 = Color3.fromRGB(0, 150, 255)
    mainFrame.Parent = FixingGui

    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0, 8)
    UICorner.Parent = mainFrame

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, 0, 0, 40)
    titleLabel.BackgroundTransparency = 1
    titleLabel.TextColor3 = Color3.fromRGB(0, 200, 255)
    titleLabel.Font = Enum.Font.SourceSansBold
    titleLabel.TextSize = 22
    titleLabel.Text = "RECOVERY PROTOCOL"
    titleLabel.Parent = mainFrame

    local statusLabel = Instance.new("TextLabel")
    statusLabel.Size = UDim2.new(1, -20, 0, 30)
    statusLabel.Position = UDim2.new(0.5, 0, 0, 50)
    statusLabel.AnchorPoint = Vector2.new(0.5, 0)
    statusLabel.BackgroundTransparency = 1
    statusLabel.TextColor3 = Color3.new(1, 1, 1)
    statusLabel.Font = Enum.Font.Code
    statusLabel.TextSize = 16
    statusLabel.Text = "Анализ повреждений..."
    statusLabel.Parent = mainFrame

    local progressBarBg = Instance.new("Frame")
    progressBarBg.Size = UDim2.new(1, -40, 0, 20)
    progressBarBg.Position = UDim2.new(0.5, 0, 0, 95)
    progressBarBg.AnchorPoint = Vector2.new(0.5, 0)
    progressBarBg.BackgroundColor3 = Color3.fromRGB(10, 10, 20)
    progressBarBg.Parent = mainFrame

    local progressBarFill = Instance.new("Frame")
    progressBarFill.Size = UDim2.new(0, 0, 1, 0)
    progressBarFill.BackgroundColor3 = Color3.fromRGB(0, 200, 255)
    progressBarFill.Parent = progressBarBg

    -- Анимация прогресс-бара и смена текста
    TweenService:Create(progressBarFill, TweenInfo.new(4, Enum.EasingStyle.Linear), {Size = UDim2.new(1, 0, 1, 0)}):Play()
    task.wait(1.5)
    statusLabel.Text = "Исправление секторов памяти... (修復中)"
    task.wait(2.5)
    statusLabel.Text = "Ошибки исправлены. Система восстановлена. (復旧完了)"
    
    Debris:AddItem(FixingGui, 6)
end

-- Функция для отображения UI "восстановление не удалось"
local function showRecoveryFailedUI()
    local FailedGui = Instance.new("ScreenGui")
    FailedGui.Name = "RecoveryFailedNotice"
    FailedGui.Parent = CoreGui
    FailedGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    FailedGui.DisplayOrder = 997 -- Чуть ниже, чем критическая ошибка, но выше обычного GUI

    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(0, 580, 0, 140)
    mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    mainFrame.BackgroundColor3 = Color3.fromRGB(50, 0, 0) -- Темно-красный, почти черный
    mainFrame.BackgroundTransparency = 0.1
    mainFrame.BorderSizePixel = 2
    mainFrame.BorderColor3 = Color3.fromRGB(100, 0, 0) -- Более темная рамка
    mainFrame.Parent = FailedGui

    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0, 10)
    UICorner.Parent = mainFrame

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, 0, 0, 40)
    titleLabel.BackgroundTransparency = 1
    titleLabel.TextColor3 = Color3.fromRGB(255, 100, 100) -- Светло-красный
    titleLabel.Font = Enum.Font.Code
    titleLabel.TextSize = 26
    titleLabel.Text = "!! RECOVERY FAILED !!"
    titleLabel.Parent = mainFrame

    local messageLabel = Instance.new("TextLabel")
    messageLabel.Size = UDim2.new(1, -20, 0, 80)
    messageLabel.Position = UDim2.new(0.5, 0, 0, 50)
    messageLabel.AnchorPoint = Vector2.new(0.5, 0)
    messageLabel.BackgroundTransparency = 1
    messageLabel.TextColor3 = Color3.fromRGB(255, 150, 150)
    messageLabel.Font = Enum.Font.Code
    messageLabel.TextSize = 18
    messageLabel.TextWrapped = true    
    messageLabel.Text = "Ошибка восстановления системных файлов. Попробуйте перезагрузить устройство.\n(Error Code: 0xDEADBEEF_FAIL)"
    messageLabel.Parent = mainFrame

    Debris:AddItem(FailedGui, 6) -- Исчезает через 6 секунд
end

-- Вызываем функцию сразу после инжекта скрипта
local errorGui = showPrankError()

-- Планируем смену UI
task.delay(6, function()
    if errorGui then
        errorGui:Destroy()
    end
    -- После UI "исправления" показываем UI "восстановление не удалось"
    local fixingGui = showFixingUI()
    task.delay(6, function() -- Ждем, пока fixingGui исчезнет (6 секунд)
        if fixingGui then
            fixingGui:Destroy()
        end
        showRecoveryFailedUI()
    end)
end)

-- Выводим сообщение в консоль для подтверждения
print("...Попытка восстановления не удалась. Шутка удалась.")
